An incredibly robust #encryption  and #authentication protocol that only uses [[Symmetric Encryption]]

![[kerberos-diagram.png]]

# How it works
Assume a simple network with the following machines/users/services
A - user wishing to connect to B
B - file sharing service hosting a documents folder
S - Authentication service in the KDC
T - Ticket granting (authorization) service in the KDC

# [[KDC]]
![[KDC]]

# 2 Types of Keys
Long term keys are keys between users, and the KDC services
Session keys (short term keys) are keys generated by the KDC to connect Kerberos users to each other.

# The Full Protocol
1 
	A username and password (configured to be a member of the organization and stored in the KDC) is hashed for A
2 
	This hash is used as a symmetric key between A and S, Kas.
3 
	A, asks S for access to the authorization service T. By sending {A, T, random number}Kas
4 
	S responds to A with {Kat, random number, time, lifetime, T}Kas as well as {Kat, A, lifetime}Kst. The second message cannot be read by A, and is used as a certificate to authenticate A to T
5 
	A asks T for access to B, first sending {Kat, A, lifetime}Kst and then {A, current time, B, random number}Kat.
6
	T responds to A with {Kab, random number, current time, lifetime, B}Kat, as well as {Kab, A, lifetime}Ktb. The second message is once again unreadable to A, and is used as a certificate to authenticate A to B
7
	A asks to connect to B by sending {A, current time}Kab, as well as the certificate {Kab, A, lifetime}Kbt
8
	B responds to A with an acknowledgement {current time sent by A +1}Kab

